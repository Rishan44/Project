
<%- include('../partials/head.ejs') %>


<%- include('../partials/userHeader.ejs') %>



        <!-- mini cart start -->
        <div class="sidebar-cart-active">
            <div class="sidebar-cart-all">
                <a class="cart-close" href="#"><i class="icon_close"></i></a>
                <div class="cart-content">
                    <h3>Shopping Cart</h3>
                    <ul>
                        <li class="single-product-cart">
                            <div class="cart-img">
                                <a href="#"><img src="assets/images/cart/cart-1.jpg" alt=""></a>
                            </div>
                            <div class="cart-title">
                                <h4><a href="#">Simple Black T-Shirt</a></h4>
                                <span> 1 × $49.00	</span>
                            </div>
                            <div class="cart-delete">
                                <a href="#">×</a>
                            </div>
                        </li>
                        <li class="single-product-cart">
                            <div class="cart-img">
                                <a href="#"><img src="assets/images/cart/cart-2.jpg" alt=""></a>
                            </div>
                            <div class="cart-title">
                                <h4><a href="#">Norda Backpack</a></h4>
                                <span> 1 × $49.00	</span>
                            </div>
                            <div class="cart-delete">
                                <a href="#">×</a>
                            </div>
                        </li>
                    </ul>
                    <div class="cart-total">
                        <h4>Subtotal: <span>$170.00</span></h4>
                    </div>
                    <div class="cart-checkout-btn">
                        <a class="btn-hover cart-btn-style" href="cart.html">view cart</a>
                        <a class="no-mrg btn-hover cart-btn-style" href="checkout.html">checkout</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="breadcrumb-area bg-gray">
            <div class="container">
                <div class="breadcrumb-content text-center">
                    <ul>
                        <li>
                            <a href="/">Home</a>
                        </li>
                        <li class="active">my account </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- my account wrapper start -->
        <div class="my-account-wrapper pt-120 pb-120">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <!-- My Account Page Start -->
                        <div class="myaccount-page-wrapper">
                            <!-- My Account Tab Menu Start -->
                            <div class="row">
                                <div class="col-lg-3 col-md-4">
                                    <div class="myaccount-tab-menu nav" role="tablist">
                                        <a href="#dashboad" class="active" data-toggle="tab">Profile</a>
                                        <a href="/profile/myOrders" > Orders</a>
                                        <!-- <a href="#download" data-toggle="tab"><i class="fa fa-cloud-download"></i> Download</a> -->
                                        <a href="#address-edit" data-toggle="tab"> address</a>
                                        <a href="/profile/changePassword" > Change Password </a>
                                        <a href="/profile/walletHistory"> Wallet History</a>
                                        <!-- <a href="login-register.html"><i class="fa fa-sign-out"></i> Logout</a> -->
                                    </div>
                                </div>
                                <!-- My Account Tab Menu End -->
                                <!-- My Account Tab Content Start -->
                                <div class="col-lg-9 col-md-8">
                                    <div class="tab-content" id="myaccountContent">
                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
                                            <div class="myaccount-content">
                                                <div class="welcome">
                                                    <!-- <p>Hello, <strong>Alex Tuntuni</strong> (If Not <strong>Tuntuni !</strong><a href="login-register.html" class="logout"> Logout</a>)</p> -->
                                                    <div class="col-lg-12 col-md-12">
                                                        <div class="tab-content" id="myaccountContent">
                                                            <!-- Single Tab Content Start -->
                                                            <div class="tab-pane fade show active" id="dashboard"
                                                                role="tabpanel">
                                                                <div class="myaccount-content">
                                                                    <div style="display: flex;
                                                                    justify-content: space-between;">
                                                                        <div>   <h3>Profile</h3></div>
                                                                 <a href="/profile/edit">
                                                                    <div class="single-input-item">
                                                                        <button type="submit" class="check-btn sqr-btn"" style="border: none;
                                                                        background-color: #ff2f2f;
                                                                        text-transform: uppercase;
                                                                        font-weight: 600;
                                                                        padding: 9px 25px;
                                                                        color: #fff;
                                                                        font-size: 13px;">Edit Profile</button>
                                                                    </div>
                                                                 </a>
                                                                   
                                                                </div>
                                                                <div>
                                                                    <div class="welcome">
                                                                        <!-- <p>Hello, <strong>Alex Tuntuni</strong> (If Not <strong>Tuntuni !</strong><a href="login-register.html" class="logout"> Logout</a>)</p> -->
                                                                        <% if (userData) { %>
                                                                            <ul class="list-group">
                                                                                <li class="list-group-item">
                                                                                    <span class="fw-bold">Name:</span>
                                                                                    <%= userData.fname %>
                                                                                    <%= userData.lname %>
                                                                                       
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <span class="fw-bold">Mobile:</span>
                                                                                    <%= userData.mobile %>
                                                                                </li>
                                                                                <li class="list-group-item">
                                                                                    <span class="fw-bold">Email:</span>
                                                                                    <%= userData.email %>
                                                                                </li>
                                                                                <% if(userAddress && userAddress.addresses.length>0){ %>




                                                                                    <li class="list-group-item">
                                                                                        <span
                                                                                            class=""><b>Address:</b><br>
                                                                                            <%= userAddress.addresses[0].userName
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%= userAddress.addresses[0].email
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%=userAddress.addresses[0].address
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%= userAddress.addresses[0].town
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%= userAddress.addresses[0].state
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%= userAddress.addresses[0].country
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%= userAddress.addresses[0].zip
                                                                                                %>
                                                                                        </span><br>
                                                                                        <span class="">
                                                                                            <%=userAddress.addresses[0].mobile
                                                                                                %>
                                                                                        </span><br>


                                                                                    </li>


                                                                                    <% }else{ %>
                                                                                        <li class="list-group-item">
                                                                                            <span
                                                                                                class=""><b>Address:</b>
                                                                                                No saved address <a
                                                                                                    class="fw-bold text-primary text-decoration-underline"
                                                                                                    href="/profile/id=<%= userData._id %>/addAddress?returnPage=profile">Add
                                                                                                    Address</a> </span>

                                                                                        </li>
                                                                                        <% } %>
                                                                                            <!-- <li
                                                                                                class="list-group-item text-center">
                                                                                                <span
                                                                                                    class="fw-bold text-success"><a
                                                                                                        href="/myorders">
                                                                                                        <button
                                                                                                            class="btn btn-dark text-white rounded-0 fw-bold fs-7 mt-2 mb-2"><i
                                                                                                                class="bi bi-border-style"></i>
                                                                                                            MY
                                                                                                            ORDERS</button>
                                                                                                    </a></span>
                                                                                                <span
                                                                                                    class="fw-bold text-success"><a
                                                                                                        href="/profile/id=<%= userData._id %>/addaddress">
                                                                                                        <button
                                                                                                            class="btn btn-dark text-white rounded-0 fw-bold fs-7 mt-2 mb-2"><i
                                                                                                                class="bi bi-plus-lg"></i>
                                                                                                            ADD
                                                                                                            ADDRESS</button>
                                                                                                    </a></span>
                                                                                                <span
                                                                                                    class="fw-bold text-success"><a
                                                                                                        href="/profile/<%= userData._id %>/manageaddress">
                                                                                                        <button
                                                                                                            class="btn btn-dark text-white rounded-0 fw-bold fs-7 mt-2 mb-2"><i
                                                                                                                class="bi bi-house"></i>
                                                                                                            MANAGE
                                                                                                            ADDRESS</button>
                                                                                                    </a></span>
                                                                                                <span
                                                                                                    class="fw-bold text-success"><a
                                                                                                        href="/profile/id=<%= userData._id %>/managepassword">
                                                                                                        <button
                                                                                                            class="btn btn-dark text-white rounded-0 fw-bold fs-7 mt-2 mb-2"><i
                                                                                                                class="bi bi-key"></i>
                                                                                                            MANAGE
                                                                                                            PASSWORD</button>
                                                                                                    </a></span>
                                                                                            </li> -->
                                                                                        
                                                                                            <!-- You can add more profile details as needed -->
                                                                            </ul>
                                                                            <% } else { %>
                                                                                <!-- User not found -->
                                                                                <p>User not found</p>
                                                                                <% } %>  
                                                
                                                                                    
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>                
                                                </div>
                                            </div>
                                            
                                        </div>
                                     </div>
                                        
                                        <!-- Single Tab Content End -->
                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade" id="orders" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Orders</h3>
                                                <div class="myaccount-table table-responsive text-center">
                                                    <table class="table table-bordered">
                                                        <thead class="thead-light">
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>
                                                                <th>Status</th>
                                                                <th>Total</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>1</td>
                                                                <td>Aug 22, 2018</td>
                                                                <td>Pending</td>
                                                                <td>$3000</td>
                                                                <td><a href="cart.html" class="check-btn sqr-btn ">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>2</td>
                                                                <td>July 22, 2018</td>
                                                                <td>Approved</td>
                                                                <td>$200</td>
                                                                <td><a href="cart.html" class="check-btn sqr-btn ">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>3</td>
                                                                <td>June 12, 2017</td>
                                                                <td>On Hold</td>
                                                                <td>$990</td>
                                                                <td><a href="cart.html" class="check-btn sqr-btn ">View</a></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Single Tab Content End -->
                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade" id="download" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Downloads</h3>
                                                <div class="myaccount-table table-responsive text-center">
                                                    <table class="table table-bordered">
                                                        <thead class="thead-light">
                                                            <!-- <tr>
                                                                <th>Product</th>
                                                                <th>Date</th>
                                                                <th>Expire</th>
                                                                <th>Download</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>Haven - Free Real Estate PSD Template</td>
                                                                <td>Aug 22, 2018</td>
                                                                <td>Yes</td>
                                                                <td><a href="#" class="check-btn sqr-btn "><i class="fa fa-cloud-download"></i> Download File</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>HasTech - Profolio Business Template</td>
                                                                <td>Sep 12, 2018</td>
                                                                <td>Never</td>
                                                                <td><a href="#" class="check-btn sqr-btn "><i class="fa fa-cloud-download"></i> Download File</a></td>
                                                            </tr> -->
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Single Tab Content End -->
                                        <!-- Single Tab Content Start -->
                                        <div class="tab-pane fade" id="payment-method" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Payment Method</h3>
                                                <p class="saved-message">You Can't Saved Your Payment Method yet.</p>
                                            </div>
                                        </div>
                                        <!-- Single Tab Content End -->
                                        <!-- Single Tab Content Start -->

                                        
                                        <div class="tab-pane fade" id="address-edit" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Manage Address</h3>
                                                <%
                                                    if(userAddress && userAddress.addresses.length >= 5){
                                                        %>
                                                        <div class="row d-flex justify-content-end mx-3">
                                                            <p>You can add max of 5 Addresses</p>
                                                        </div>
                                                        <%
                                                    }else{
                                                        %>
                                                        <div class="row d-flex justify-content-end mx-3">
                                                            <a href="/profile/addAddress?returnPage=profile" class="btn btn-dark"  >Add Address</a>
                                                        </div>
                                                        <%
                                                    }
                                                    %>
                                        </div>

                                        <% 
                                                if(userAddress && userAddress.addresses.length>0){
                                                    %>
                                                    <div class="row">
                                                        <% 
                                                        userAddress.addresses.forEach((address) => {
                                                            %>
                                                            <div class="col-sm-6 mb-3">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <h5 class="card-title"><%= address.userName  %> &nbsp; &nbsp;<%= address.mobile %></h5>
                                                                        <span class="card-text"><%= address.email  %>
                                                                        </span><br>
                                                                        <span class="card-text"><%= address.address  %>
                                                                        </span><br>
                                                                        <span class="card-text"><%= address.town  %>
                                                                        </span><br>
                                                                        <span class="card-text"><%= address.zip  %>
                                                                        </span><br>
                                                                        <span class="card-text"><%= address.state %>
                                                                        </span>
                                                                       
                                                                        <div class="d-flex">
                                                                            <div class="">
                                                                                <a href="/profile/editAddress/<%= address._id %>?returnPage=profile">
                                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                                                        <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                                                        <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                                                                    </svg>
                                                                                </a>
                                                                                <a href="/profile/deleteAddress/<%= address._id %>" class="ms-2">
                                                                                    <svg style="color: red;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"/>
                                                                                        <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
                                                                                    </svg>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <% 
                                                        })
                                                        %>
                                                    </div>
                                                    <%
                                                }else{
                                                    %>
                                                    <div class="d-flex justify-content-center align-items-center mt-5">
                                                        <h5>No address saved</h5>
                                                    </div>
                                                    <% 
                                                }
                                            %>
                                            </div> 
                                        <!-- Single Tab Content End -->
                                        <!-- Single Tab Content Start -->
                                        <!-- <div class="tab-pane fade" id="account-info" role="tabpanel">
                                            <div class="myaccount-content">
                                                <h3>Change Password</h3>
                                                <section class="vh-100">
                                                    <div class="container py-5 h-100">
                                                        <div class="row d-flex justify-content-center align-items-center h-100">
                                                            <div class="col-12 col-md-9 col-sm-12">
                                                                <div class="card shadow-2-strong">
                                                                    <div class=" p-5 ">
                                                                        <div class="text-center">
                                                                            <h3 class="mb-3">Change Password</h3>
                                                                           
                                                                        </div>
                                                                        <form action="/profile/changePassword" method="post" class="d-flex flex-column ">
                                                                            <div class="form-outline mb-3 row">
                                                                                <div class=" col-md-6 col-12 mb-3">
                                                                                    <label class="form-label" for="fname">Old Password</label>
                                                                                    <input type="password" id="oldPassword" class="form-control form-control-md rounded-0" placeholder="Enter Old Password" name="oldPassword" required/>
                                                                                    <small id="oldPasswordErr" class="error"></small>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-outline mb-3 row">
                                                                                <div class="col-md-6 col-12">
                                                                                    <label class="form-label" for="newPassword">New Password</label>
                                                                                    <input type="password" id="newPassword" class="form-control form-control-md rounded-0" placeholder="Enter New Password" name="newPassword" required/>
                                                                                    <small id="newPasswordErr" class="error"></small>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-outline mb-3 row">
                                                                                <div class=" col-md-6 col-12 mb-3">
                                                                                    <label class="form-label" for="mobile">Confirm Password</label>
                                                                                    <input type="password" id="confirmPassword" class="form-control form-control-md rounded-0" placeholder="Enter New Password Again" name="confirmPassword" required/>
                                                                                    <small id="confirmPasswordErr" class="error"></small>
                                                                                </div>
                                                                            </div>
                                            
                                                                            <div class="text-center">
                                                                                <button class="btn btn-dark btn-md rounded-pill px-5 py-2 login-btn" type="submit" >Change Password</button>
                                                                                <p>forgot password? <a href="/profile/forgotPassword">reset</a></p>
                                                                            </div>
                                                                        </form>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section> -->
                                                <!-- <div class="account-details-form">
                                                    <form action="/profile/changePassword" method="post"> -->
                                                        <!-- <div class="row">
                                                            <div class="col-lg-6">
                                                                <div class="single-input-item">
                                                                    <label for="first-name" class="required">First Name</label>
                                                                    <input type="text" id="first-name" />
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="single-input-item">
                                                                    <label for="last-name" class="required">Last Name</label>
                                                                    <input type="text" id="last-name" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="single-input-item">
                                                            <label for="display-name" class="required">Display Name</label>
                                                            <input type="text" id="display-name" />
                                                        </div>
                                                        <div class="single-input-item">
                                                            <label for="email" class="required">Email Addres</label>
                                                            <input type="email" id="email" />
                                                        </div> -->
                                                        <!-- <fieldset>
                                                            <legend>Password change</legend>
                                                            <div class="single-input-item">
                                                                <label for="current-pwd" class="required">Current Password</label>
                                                                <input type="password" id="current-pwd" />
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-6">
                                                                    <div class="single-input-item">
                                                                        <label for="new-pwd" class="required">New Password</label>
                                                                        <input type="password" id="new-pwd" />
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-6">
                                                                    <div class="single-input-item">
                                                                        <label for="confirm-pwd" class="required">Confirm Password</label>
                                                                        <input type="password" id="confirm-pwd" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </fieldset>
                                                        <div class="single-input-item">
                                                            <button class="check-btn sqr-btn ">Save Changes</button>
                                                        </div> -->
                                                    <!-- </form>
                                                </div>
                                            </div>
                                        
                                        </div> -->
                                         <!-- Single Tab Content End -->
                                    </div>
                                </div> <!-- My Account Tab Content End -->
                            </div>
                        </div> <!-- My Account Page End -->
                    </div>
                </div>
            </div>
            <!-- Button trigger modal -->

        </div>
        <!-- my account wrapper end -->
         <%- include('../partials/script.ejs') %>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>


